<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3.2 ネットワーク構造の諸指標 | Network Analysis Using R</title>
  <meta name="description" content="3.2 ネットワーク構造の諸指標 | Network Analysis Using R" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="3.2 ネットワーク構造の諸指標 | Network Analysis Using R" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3.2 ネットワーク構造の諸指標 | Network Analysis Using R" />
  
  
  

<meta name="author" content="Tsubasa Yamaguchi" />


<meta name="date" content="2023-10-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="Chapter3-1.html"/>
<link rel="next" href="Chapter4-1.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.27/datatables.js"></script>
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script>
<link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
<script src="libs/selectize-0.12.0/selectize.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="custom_style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>本稿の目的</a></li>
<li class="chapter" data-level="" data-path="Chapter0.html"><a href="Chapter0.html"><i class="fa fa-check"></i>0. パッケージの読み込み</a></li>
<li class="chapter" data-level="1" data-path="Chapter1-1.html"><a href="Chapter1-1.html"><i class="fa fa-check"></i><b>1</b> 社会ネットワーク分析の概説</a>
<ul>
<li class="chapter" data-level="1.1" data-path="Chapter1-1.html"><a href="Chapter1-1.html#社会ネットワーク分析snaとは"><i class="fa fa-check"></i><b>1.1</b> 社会ネットワーク分析(SNA)とは</a></li>
<li class="chapter" data-level="1.2" data-path="Chapter1-2.html"><a href="Chapter1-2.html"><i class="fa fa-check"></i><b>1.2</b> 社会ネットワークの基礎</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="Chapter1-2.html"><a href="Chapter1-2.html#グラフ"><i class="fa fa-check"></i><b>1.2.1</b> グラフ</a></li>
<li class="chapter" data-level="1.2.2" data-path="Chapter1-2.html"><a href="Chapter1-2.html#隣接行列マトリックス"><i class="fa fa-check"></i><b>1.2.2</b> 隣接行列(マトリックス)</a></li>
<li class="chapter" data-level="1.2.3" data-path="Chapter1-2.html"><a href="Chapter1-2.html#rでのグラフの描画"><i class="fa fa-check"></i><b>1.2.3</b> Rでのグラフの描画</a>
<ul>
<li class="chapter" data-level="1.2.3.1" data-path="Chapter1-2.html"><a href="Chapter1-2.html#tbl_graphクラスへの変換"><i class="fa fa-check"></i><b>1.2.3.1</b> <code>tbl_graph</code>クラスへの変換</a></li>
<li class="chapter" data-level="1.2.3.2" data-path="Chapter1-2.html"><a href="Chapter1-2.html#ggraphを用いた描画"><i class="fa fa-check"></i><b>1.2.3.2</b> <code>ggraph</code>を用いた描画</a></li>
</ul></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Chapter2-1.html"><a href="Chapter2-1.html"><i class="fa fa-check"></i><b>2</b> データの読み込みとマトリックスの作成</a>
<ul>
<li class="chapter" data-level="2.1" data-path="Chapter2-1.html"><a href="Chapter2-1.html#s2-1"><i class="fa fa-check"></i><b>2.1</b> 2個体間の交渉を記録したデータフレーム</a></li>
<li class="chapter" data-level="2.2" data-path="Chapter2-2.html"><a href="Chapter2-2.html"><i class="fa fa-check"></i><b>2.2</b> Group by individual</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="Chapter3-0.html"><a href="Chapter3-0.html"><i class="fa fa-check"></i><b>3</b> ネットワーク指標の算出</a>
<ul>
<li class="chapter" data-level="3.1" data-path="Chapter3-1.html"><a href="Chapter3-1.html"><i class="fa fa-check"></i><b>3.1</b> ノードについての諸指標(中心性指標)</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="Chapter3-1.html"><a href="Chapter3-1.html#近接中心性closeness-centrality"><i class="fa fa-check"></i><b>3.1.1</b> 近接中心性(closeness centrality)</a></li>
<li class="chapter" data-level="3.1.2" data-path="Chapter3-1.html"><a href="Chapter3-1.html#次数中心性degree-centrality"><i class="fa fa-check"></i><b>3.1.2</b> 次数中心性(Degree centrality)</a></li>
<li class="chapter" data-level="3.1.3" data-path="Chapter3-1.html"><a href="Chapter3-1.html#重み付き中心性strength-centrality"><i class="fa fa-check"></i><b>3.1.3</b> 重み付き中心性(Strength centrality)</a></li>
<li class="chapter" data-level="3.1.4" data-path="Chapter3-1.html"><a href="Chapter3-1.html#固有ベクトル中心性eigenvector-centrality"><i class="fa fa-check"></i><b>3.1.4</b> 固有ベクトル中心性(Eigenvector centrality)</a></li>
<li class="chapter" data-level="3.1.5" data-path="Chapter3-1.html"><a href="Chapter3-1.html#pagerank"><i class="fa fa-check"></i><b>3.1.5</b> PageRank</a></li>
<li class="chapter" data-level="3.1.6" data-path="Chapter3-1.html"><a href="Chapter3-1.html#媒介中心性betweeness-centrality"><i class="fa fa-check"></i><b>3.1.6</b> 媒介中心性(Betweeness centrality)</a></li>
<li class="chapter" data-level="3.1.7" data-path="Chapter3-1.html"><a href="Chapter3-1.html#情報中心性information-centrality"><i class="fa fa-check"></i><b>3.1.7</b> 情報中心性(Information centrality)</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="Chapter3-2.html"><a href="Chapter3-2.html"><i class="fa fa-check"></i><b>3.2</b> ネットワーク構造の諸指標</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="Chapter3-2.html"><a href="Chapter3-2.html#集中度centralization"><i class="fa fa-check"></i><b>3.2.1</b> 集中度(Centralization)</a></li>
<li class="chapter" data-level="3.2.2" data-path="Chapter3-2.html"><a href="Chapter3-2.html#密度density"><i class="fa fa-check"></i><b>3.2.2</b> 密度(Density)</a></li>
<li class="chapter" data-level="3.2.3" data-path="Chapter3-2.html"><a href="Chapter3-2.html#同類性assortativity"><i class="fa fa-check"></i><b>3.2.3</b> 同類性(Assortativity)</a>
<ul>
<li class="chapter" data-level="3.2.3.1" data-path="Chapter3-2.html"><a href="Chapter3-2.html#連続的な属性の場合"><i class="fa fa-check"></i><b>3.2.3.1</b> 連続的な属性の場合</a></li>
<li class="chapter" data-level="3.2.3.2" data-path="Chapter3-2.html"><a href="Chapter3-2.html#離散的な属性の場合"><i class="fa fa-check"></i><b>3.2.3.2</b> 離散的な属性の場合</a></li>
</ul></li>
<li class="chapter" data-level="3.2.4" data-path="Chapter3-2.html"><a href="Chapter3-2.html#推移性transitivity"><i class="fa fa-check"></i><b>3.2.4</b> 推移性(Transitivity)</a></li>
<li class="chapter" data-level="3.2.5" data-path="Chapter3-2.html"><a href="Chapter3-2.html#modularity"><i class="fa fa-check"></i><b>3.2.5</b> Modularity</a></li>
<li class="chapter" data-level="3.2.6" data-path="Chapter3-2.html"><a href="Chapter3-2.html#応用例下位集団の検出"><i class="fa fa-check"></i><b>3.2.6</b> 応用例(下位集団の検出)</a>
<ul>
<li class="chapter" data-level="3.2.6.1" data-path="Chapter3-2.html"><a href="Chapter3-2.html#modularityを用いる方法"><i class="fa fa-check"></i><b>3.2.6.1</b> Modularityを用いる方法</a></li>
<li class="chapter" data-level="3.2.6.2" data-path="Chapter3-2.html"><a href="Chapter3-2.html#構造類似性を用いる方法"><i class="fa fa-check"></i><b>3.2.6.2</b> 構造類似性を用いる方法</a></li>
</ul></li>
<li class="chapter" data-level="3.2.7" data-path="Chapter3-2.html"><a href="Chapter3-2.html#その他"><i class="fa fa-check"></i><b>3.2.7</b> その他</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="Chapter4-1.html"><a href="Chapter4-1.html"><i class="fa fa-check"></i><b>4</b> 統計的検定</a>
<ul>
<li class="chapter" data-level="4.1" data-path="Chapter4-1.html"><a href="Chapter4-1.html#s4-1"><i class="fa fa-check"></i><b>4.1</b> なぜランダム化検定が必要か？</a></li>
<li class="chapter" data-level="4.2" data-path="Chapter4-2.html"><a href="Chapter4-2.html"><i class="fa fa-check"></i><b>4.2</b> Network permutation</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="Chapter4-2.html"><a href="Chapter4-2.html#node-permutationの手法"><i class="fa fa-check"></i><b>4.2.1</b> Node permutationの手法</a></li>
<li class="chapter" data-level="4.2.2" data-path="Chapter4-2.html"><a href="Chapter4-2.html#分析例"><i class="fa fa-check"></i><b>4.2.2</b> 分析例</a>
<ul>
<li class="chapter" data-level="4.2.2.1" data-path="Chapter4-2.html"><a href="Chapter4-2.html#線形モデルglmglmmなど"><i class="fa fa-check"></i><b>4.2.2.1</b> 線形モデル(GLM、GLMMなど)</a></li>
<li class="chapter" data-level="4.2.2.2" data-path="Chapter4-2.html"><a href="Chapter4-2.html#ネットワーク同士の関連の検討"><i class="fa fa-check"></i><b>4.2.2.2</b> ネットワーク同士の関連の検討</a></li>
</ul></li>
<li class="chapter" data-level="4.2.3" data-path="Chapter4-2.html"><a href="Chapter4-2.html#node-permutationの欠点"><i class="fa fa-check"></i><b>4.2.3</b> Node permutationの欠点</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="Chapter4-3.html"><a href="Chapter4-3.html"><i class="fa fa-check"></i><b>4.3</b> Pre-network permutation</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="Chapter4-3.html"><a href="Chapter4-3.html#pre-network-permutationの手法"><i class="fa fa-check"></i><b>4.3.1</b> Pre-network permutationの手法</a></li>
<li class="chapter" data-level="4.3.2" data-path="Chapter4-3.html"><a href="Chapter4-3.html#分析例-1"><i class="fa fa-check"></i><b>4.3.2</b> 分析例</a>
<ul>
<li class="chapter" data-level="4.3.2.1" data-path="Chapter4-3.html"><a href="Chapter4-3.html#snaパッケージを用いる方法-1"><i class="fa fa-check"></i><b>4.3.2.1</b> <code>sna</code>パッケージを用いる方法</a></li>
<li class="chapter" data-level="4.3.2.2" data-path="Chapter4-3.html"><a href="Chapter4-3.html#antsパッケージを用いる方法-1"><i class="fa fa-check"></i><b>4.3.2.2</b> <code>ANTs</code>パッケージを用いる方法</a></li>
</ul></li>
<li class="chapter" data-level="4.3.3" data-path="Chapter4-3.html"><a href="Chapter4-3.html#pre-network-permutationの欠点"><i class="fa fa-check"></i><b>4.3.3</b> Pre-network permutationの欠点</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="Chapter4-4.html"><a href="Chapter4-4.html"><i class="fa fa-check"></i><b>4.4</b> パーミュテーション検定以外の統計的検定方法</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="Chapter4-4.html"><a href="Chapter4-4.html#指数ランダムグラフモデルと確率的アクター志向モデル"><i class="fa fa-check"></i><b>4.4.1</b> 指数ランダムグラフモデルと確率的アクター志向モデル</a></li>
<li class="chapter" data-level="4.4.2" data-path="Chapter4-4.html"><a href="Chapter4-4.html#ランダム化を用いない方法"><i class="fa fa-check"></i><b>4.4.2</b> ランダム化を用いない方法</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="sessioninfo.html"><a href="sessioninfo.html"><i class="fa fa-check"></i>実行環境</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Network Analysis Using R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ネットワーク構造の諸指標" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> ネットワーク構造の諸指標<a href="Chapter3-2.html#ネットワーク構造の諸指標" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>ここでは、ネットワーク全体の構造の特徴を表す指標についてまとめる。</p>
<div id="集中度centralization" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> 集中度(Centralization)<a href="Chapter3-2.html#集中度centralization" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>前節では、各ノードがグラフ内でどの程度中心的かを表す指標として中心性指標を扱ってきた。それらを用いて<u>グラフにおいて特定のノードに高い中心性がどの程度集中しているのか</u>を示す指標が<strong>集中度</strong>である。グラフの集中度(<span class="math inline">\(C_x\)</span>)は以下の式によって定式化され、0から1の値をとる。ただし、各ノードの中心性指標を<span class="math inline">\(C_x(i)\)</span>、グラフにおけるその中心性指標の最大値を<span class="math inline">\(C_x(i^*)\)</span>とする。また、そのグラフと同数のノード(n個)を持つグラフにおける<span class="math inline">\(\sum_{i=1}^n [C_x(i^*)-C_x(i)]\)</span>の最大値を<span class="math inline">\(max\sum_{i=1}^n [C_x(i^*)-C_x(i)]\)</span>とする。</p>
<p><span class="math inline">\(C_x = \frac {\sum_{i=1}^n [C_x(i^*)-C_x(i)]}{max\sum_{i=1}^n [C_x(i^*)-C_x(i)]}\)</span></p>
<p>例として、第<a href="Chapter2-1.html#c2">2</a>章で算出した毛づくろい頻度ネットワーク<code>groom_mat_b</code>(表<a href="Chapter2-1.html#tab:tab-groom-b">2.3</a>)の集中度を求める。<code>igraph</code>パッケージでは、様々な中心性指標についての中心度を求められる。<code>graph_from_adjacency_matrix()</code>で<code>igraph</code>クラスに変換した後に算出する。</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="Chapter3-2.html#cb50-1" tabindex="-1"></a><span class="do">## igraphクラスに変換</span></span>
<span id="cb50-2"><a href="Chapter3-2.html#cb50-2" tabindex="-1"></a>graph_groom <span class="ot">&lt;-</span> <span class="fu">graph_from_adjacency_matrix</span>(groom_mat_b,</span>
<span id="cb50-3"><a href="Chapter3-2.html#cb50-3" tabindex="-1"></a>                                           <span class="do">## 有向グラフなら &quot;directed&quot;</span></span>
<span id="cb50-4"><a href="Chapter3-2.html#cb50-4" tabindex="-1"></a>                                           <span class="at">mode=</span> <span class="st">&quot;undirected&quot;</span>, </span>
<span id="cb50-5"><a href="Chapter3-2.html#cb50-5" tabindex="-1"></a>                                           <span class="do">## 重みなしなら NULL</span></span>
<span id="cb50-6"><a href="Chapter3-2.html#cb50-6" tabindex="-1"></a>                                           <span class="at">weighted =</span> <span class="cn">TRUE</span>) </span>
<span id="cb50-7"><a href="Chapter3-2.html#cb50-7" tabindex="-1"></a></span>
<span id="cb50-8"><a href="Chapter3-2.html#cb50-8" tabindex="-1"></a></span>
<span id="cb50-9"><a href="Chapter3-2.html#cb50-9" tabindex="-1"></a><span class="do">## 次数中心性  </span></span>
<span id="cb50-10"><a href="Chapter3-2.html#cb50-10" tabindex="-1"></a><span class="fu">centr_degree</span>(graph_groom,</span>
<span id="cb50-11"><a href="Chapter3-2.html#cb50-11" tabindex="-1"></a>             <span class="do">## 入次数、出次数ならそれぞれ &quot;in&quot;と&quot;out</span></span>
<span id="cb50-12"><a href="Chapter3-2.html#cb50-12" tabindex="-1"></a>             <span class="at">mode =</span> <span class="st">&quot;all&quot;</span>)<span class="sc">$</span>centralization <span class="ot">-&gt;</span> cent_deg</span>
<span id="cb50-13"><a href="Chapter3-2.html#cb50-13" tabindex="-1"></a></span>
<span id="cb50-14"><a href="Chapter3-2.html#cb50-14" tabindex="-1"></a>cent_deg</span></code></pre></div>
<pre><code>## [1] 0.2904412</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="Chapter3-2.html#cb52-1" tabindex="-1"></a><span class="do">## 固有ベクトル中心性  </span></span>
<span id="cb52-2"><a href="Chapter3-2.html#cb52-2" tabindex="-1"></a><span class="fu">centr_eigen</span>(graph_groom,</span>
<span id="cb52-3"><a href="Chapter3-2.html#cb52-3" tabindex="-1"></a>            <span class="do">## 有向グラフならTRUE</span></span>
<span id="cb52-4"><a href="Chapter3-2.html#cb52-4" tabindex="-1"></a>            <span class="at">directed =</span> <span class="cn">FALSE</span>)<span class="sc">$</span>centralization <span class="ot">-&gt;</span> cent_eig</span>
<span id="cb52-5"><a href="Chapter3-2.html#cb52-5" tabindex="-1"></a></span>
<span id="cb52-6"><a href="Chapter3-2.html#cb52-6" tabindex="-1"></a>cent_eig</span></code></pre></div>
<pre><code>## [1] 0.3104138</code></pre>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="Chapter3-2.html#cb54-1" tabindex="-1"></a><span class="do">## 媒介中心性  </span></span>
<span id="cb54-2"><a href="Chapter3-2.html#cb54-2" tabindex="-1"></a><span class="fu">centr_betw</span>(graph_groom,</span>
<span id="cb54-3"><a href="Chapter3-2.html#cb54-3" tabindex="-1"></a>           <span class="at">directed =</span> <span class="cn">TRUE</span>)<span class="sc">$</span>centralization <span class="ot">-&gt;</span> cent_bet</span>
<span id="cb54-4"><a href="Chapter3-2.html#cb54-4" tabindex="-1"></a></span>
<span id="cb54-5"><a href="Chapter3-2.html#cb54-5" tabindex="-1"></a>cent_bet</span></code></pre></div>
<pre><code>## [1] 0.04678902</code></pre>
各指標の大きさをノードサイズに反映したグラフを以下に示した(図<a href="Chapter3-2.html#fig:fig-centr">3.10</a>)。集中度はそこまで高くないといえそう(特に媒介中心性は)?
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-centr"></span>
<img src="Network_Analysis_Using_R_files/figure-html/fig-centr-1.png" alt="次数中心性・固有ベクトル中心性・媒介中心性の値をノードの大きさに反映したグラフと各指標における集中度。
 ノードが赤い個体が各指標の最も大きい個体を示す" width="1248" />
<p class="caption">
図3.10: 次数中心性・固有ベクトル中心性・媒介中心性の値をノードの大きさに反映したグラフと各指標における集中度。
ノードが赤い個体が各指標の最も大きい個体を示す
</p>
</div>
</div>
<div id="密度density" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> 密度(Density)<a href="Chapter3-2.html#密度density" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>密度は、社会ネットワークにおける関係の緊密さの指標になりうる。密度が低いとき、社会ネットワーク内の個体間の直接的な関係は少なく、両者の関係は媒介者を通じた間接的なものが多いということができる<span class="citation">(<a href="#ref-Croft2019">D. Croft et al., 2008</a>)</span>。</p>
<ul>
<li><p>重み無しグラフの場合: 実際の辺の数をグラフに張ることが可能な辺の最大数で割ったもの<br />
ノードの数を<span class="math inline">\(n\)</span>、実際の辺の数を<span class="math inline">\(m\)</span>としたとき、<span class="math inline">\(2m/n(n-1)\)</span>(無向グラフ)または<span class="math inline">\(m/n(n-1)\)</span>(有向グラフ)</p></li>
<li><p>重み付きグラフの場合: 全辺の重みの合計をグラフに張ることが可能な辺の最大数で割ったもの<br />
ノードの数を<span class="math inline">\(n\)</span>、重みの合計を<span class="math inline">\(w\)</span>としたとき、<span class="math inline">\(2w/n(n-1)\)</span>(無向グラフ)または<span class="math inline">\(2m/n(n-1)\)</span>(有向グラフ)</p></li>
</ul>
<p>ここでは、表<a href="Chapter3-1.html#tab:tab-strength">3.1</a>の隣接行列を用いて密度を算出する。<br />
<code>ANTs</code>パッケージでは、<code>met.density()</code>で計算可能。ただし、重みなしグラフとして算出されるよう。また、<code>list()</code>関数で複数の隣接行列をリスト化することで、同時に2つ以上の隣接行列について密度を算出できる。</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="Chapter3-2.html#cb56-1" tabindex="-1"></a><span class="fu">met.density</span>(mat_undir_b)</span></code></pre></div>
<pre><code>##   Density 
## 0.3571429</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="Chapter3-2.html#cb58-1" tabindex="-1"></a><span class="do">## リスト化</span></span>
<span id="cb58-2"><a href="Chapter3-2.html#cb58-2" tabindex="-1"></a>list_mat <span class="ot">&lt;-</span> <span class="fu">list</span>(mat_undir_b, mat_dir_b)</span>
<span id="cb58-3"><a href="Chapter3-2.html#cb58-3" tabindex="-1"></a></span>
<span id="cb58-4"><a href="Chapter3-2.html#cb58-4" tabindex="-1"></a><span class="fu">met.density</span>(list_mat)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 0.3571429
## 
## [[2]]
## [1] 0.2678571</code></pre>
<p><code>sna</code>パッケージでは、<code>gden()</code>で計算可能。<code>ignore.value = FALSE</code>とすると重み付きグラフとして扱われる。<code>ANTs</code>パッケージと同様、リスト化した複数の隣接行列の密度を同時に算出できる。</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="Chapter3-2.html#cb60-1" tabindex="-1"></a><span class="do">## 重み付き</span></span>
<span id="cb60-2"><a href="Chapter3-2.html#cb60-2" tabindex="-1"></a><span class="fu">gden</span>(mat_undir_b, </span>
<span id="cb60-3"><a href="Chapter3-2.html#cb60-3" tabindex="-1"></a>     <span class="do">## 重み無グラフならば、TRUE</span></span>
<span id="cb60-4"><a href="Chapter3-2.html#cb60-4" tabindex="-1"></a>     <span class="at">ignore.eval =</span> <span class="cn">FALSE</span>,</span>
<span id="cb60-5"><a href="Chapter3-2.html#cb60-5" tabindex="-1"></a>     <span class="do">## 有向グラフならば &quot;digraph&quot;</span></span>
<span id="cb60-6"><a href="Chapter3-2.html#cb60-6" tabindex="-1"></a>     <span class="at">mode =</span> <span class="st">&quot;graph&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 0.6428571</code></pre>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="Chapter3-2.html#cb62-1" tabindex="-1"></a><span class="do">## リスト化</span></span>
<span id="cb62-2"><a href="Chapter3-2.html#cb62-2" tabindex="-1"></a><span class="fu">gden</span>(list_mat)</span></code></pre></div>
<pre><code>## [1] 0.6428571 0.4464286</code></pre>
</div>
<div id="同類性assortativity" class="section level3 hasAnchor" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> 同類性(Assortativity)<a href="Chapter3-2.html#同類性assortativity" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>ネットワーク内において、<u>似ているノード同士が結びつきやすい/結びつきにくいか</u>を表したのが<strong>同類性</strong>である。ネットワーク内の辺の両端にあるノードの中心性指標や属性の相関係数を算出したものであり、-1から1の値をとる(重み付きグラフの場合は、それで重み付けされているよう)。<u>各ノードの離散的な属性(性別、順位カテゴリなど)と連続的な属性(中心性指標、年齢など)のいずれにも適用できる</u>。計算方法の詳細は <span class="citation">Farine (<a href="#ref-Farine2014">2014</a>)</span> を参照。</p>
<p>ここでは例として、再び毛づくろい頻度ネットワーク<code>groom_mat_b</code>(表<a href="Chapter2-1.html#tab:tab-groom-b">2.3</a>)を使用する。同類性は<code>assortnet</code>パッケージ<span class="citation">(<a href="#ref-Farine2014">Farine, 2014</a>)</span>の関数群を用いて算出できる。</p>
<div id="連続的な属性の場合" class="section level4 hasAnchor" number="3.2.3.1">
<h4><span class="header-section-number">3.2.3.1</span> 連続的な属性の場合<a href="Chapter3-2.html#連続的な属性の場合" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>年齢が近い個体同士が結びつきやすいかを調べる。連続的な属性の同類性は<code>assortment.continuous()</code>関数で算出できる。係数は-0.397…となり、<strong>年齢の近い個体同士は結びつきにくい</strong>という結果になった。</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="Chapter3-2.html#cb64-1" tabindex="-1"></a><span class="do">## 年齢(2019年時点)</span></span>
<span id="cb64-2"><a href="Chapter3-2.html#cb64-2" tabindex="-1"></a>age <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">13</span>,<span class="dv">10</span>,<span class="dv">11</span>,<span class="dv">11</span>,<span class="dv">15</span>,<span class="dv">8</span>,<span class="dv">13</span>,<span class="dv">9</span>,<span class="dv">7</span>,<span class="dv">18</span>,<span class="dv">9</span>,<span class="dv">11</span>,<span class="dv">16</span>,<span class="dv">11</span>,<span class="dv">14</span>,<span class="dv">11</span>,<span class="dv">11</span>)</span>
<span id="cb64-3"><a href="Chapter3-2.html#cb64-3" tabindex="-1"></a></span>
<span id="cb64-4"><a href="Chapter3-2.html#cb64-4" tabindex="-1"></a><span class="do">## 同類性</span></span>
<span id="cb64-5"><a href="Chapter3-2.html#cb64-5" tabindex="-1"></a><span class="fu">assortment.continuous</span>(groom_mat_b,</span>
<span id="cb64-6"><a href="Chapter3-2.html#cb64-6" tabindex="-1"></a>                      <span class="do">## 各ノードの属性</span></span>
<span id="cb64-7"><a href="Chapter3-2.html#cb64-7" tabindex="-1"></a>                      <span class="at">vertex_values =</span> age,</span>
<span id="cb64-8"><a href="Chapter3-2.html#cb64-8" tabindex="-1"></a>                      <span class="do">## 重みなしなら FALSE</span></span>
<span id="cb64-9"><a href="Chapter3-2.html#cb64-9" tabindex="-1"></a>                      <span class="at">weighted =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## $r
## [1] -0.397096</code></pre>
</div>
<div id="離散的な属性の場合" class="section level4 hasAnchor" number="3.2.3.2">
<h4><span class="header-section-number">3.2.3.2</span> 離散的な属性の場合<a href="Chapter3-2.html#離散的な属性の場合" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>同じ年齢カテゴリ(低順位: m、中順位: m、高順位: h)の個体同士が結びつきやすいかを調べる。離散的な属性の同類性は<code>assortment.discrete()</code>関数で算出できる。係数はかなり高く(0.484…)、<strong>同順位カテゴリ―の個体同士がよく結びつく傾向</strong>がある。</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="Chapter3-2.html#cb66-1" tabindex="-1"></a><span class="do">## 順位カテゴリ</span></span>
<span id="cb66-2"><a href="Chapter3-2.html#cb66-2" tabindex="-1"></a>rank <span class="ot">&lt;-</span>  <span class="fu">c</span>(<span class="st">&quot;m&quot;</span>,<span class="st">&quot;m&quot;</span>,<span class="st">&quot;l&quot;</span>,<span class="st">&quot;l&quot;</span>,<span class="st">&quot;h&quot;</span>,<span class="st">&quot;h&quot;</span>,<span class="st">&quot;h&quot;</span>,<span class="st">&quot;h&quot;</span>,<span class="st">&quot;h&quot;</span>,<span class="st">&quot;h&quot;</span>,<span class="st">&quot;l&quot;</span>,<span class="st">&quot;l&quot;</span>,<span class="st">&quot;l&quot;</span>,<span class="st">&quot;m&quot;</span>,<span class="st">&quot;m&quot;</span>,<span class="st">&quot;m&quot;</span>,<span class="st">&quot;m&quot;</span>)</span>
<span id="cb66-3"><a href="Chapter3-2.html#cb66-3" tabindex="-1"></a></span>
<span id="cb66-4"><a href="Chapter3-2.html#cb66-4" tabindex="-1"></a><span class="do">## 同類性</span></span>
<span id="cb66-5"><a href="Chapter3-2.html#cb66-5" tabindex="-1"></a><span class="fu">assortment.discrete</span>(groom_mat_b,</span>
<span id="cb66-6"><a href="Chapter3-2.html#cb66-6" tabindex="-1"></a>                  <span class="do">## 各ノードの属性</span></span>
<span id="cb66-7"><a href="Chapter3-2.html#cb66-7" tabindex="-1"></a>                  <span class="at">types =</span> rank,</span>
<span id="cb66-8"><a href="Chapter3-2.html#cb66-8" tabindex="-1"></a>                  <span class="do">## 重みなしなら FALSE</span></span>
<span id="cb66-9"><a href="Chapter3-2.html#cb66-9" tabindex="-1"></a>                  <span class="at">weighted =</span> <span class="cn">TRUE</span>) <span class="ot">-&gt;</span> assort_rank</span>
<span id="cb66-10"><a href="Chapter3-2.html#cb66-10" tabindex="-1"></a></span>
<span id="cb66-11"><a href="Chapter3-2.html#cb66-11" tabindex="-1"></a>assort_rank<span class="sc">$</span>r</span></code></pre></div>
<pre><code>## [1] 0.4840036</code></pre>
<p>各カテゴリ間のノードのweightの合計を計算した隣接行列も出力してくれる(表<a href="Chapter3-2.html#tab:tab-cor">3.3</a>)。この表からも、同順位カテゴリ間での交渉が多いことが分かる。</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="Chapter3-2.html#cb68-1" tabindex="-1"></a>assort_rank<span class="sc">$</span>mixing_matrix <span class="sc">%&gt;%</span> </span>
<span id="cb68-2"><a href="Chapter3-2.html#cb68-2" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">digits =</span> <span class="dv">2</span>, <span class="at">align =</span> <span class="st">&quot;c&quot;</span>,<span class="at">caption =</span> <span class="st">&quot;各カテゴリ間のweightの合計&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb68-3"><a href="Chapter3-2.html#cb68-3" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">font_size =</span> <span class="dv">12</span>, <span class="at">full_width =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<table class="table" style="font-size: 12px; width: auto !important; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:tab-cor">表3.3: </span>各カテゴリ間のweightの合計
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:center;">
m
</th>
<th style="text-align:center;">
l
</th>
<th style="text-align:center;">
h
</th>
<th style="text-align:center;">
ai
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
m
</td>
<td style="text-align:center;">
0.25
</td>
<td style="text-align:center;">
0.08
</td>
<td style="text-align:center;">
0.06
</td>
<td style="text-align:center;">
0.40
</td>
</tr>
<tr>
<td style="text-align:left;">
l
</td>
<td style="text-align:center;">
0.08
</td>
<td style="text-align:center;">
0.13
</td>
<td style="text-align:center;">
0.02
</td>
<td style="text-align:center;">
0.23
</td>
</tr>
<tr>
<td style="text-align:left;">
h
</td>
<td style="text-align:center;">
0.06
</td>
<td style="text-align:center;">
0.02
</td>
<td style="text-align:center;">
0.28
</td>
<td style="text-align:center;">
0.36
</td>
</tr>
<tr>
<td style="text-align:left;">
bi
</td>
<td style="text-align:center;">
0.40
</td>
<td style="text-align:center;">
0.23
</td>
<td style="text-align:center;">
0.36
</td>
<td style="text-align:center;">
1.00
</td>
</tr>
</tbody>
</table>
<p><br/></p>
<p>なお離散的な属性については、<code>ANTs</code>パッケージの<code>met.assortativity()</code>関数を用いると、node permutation(詳細は<a href="Chapter4-2.html#s4-2">4.2</a>)で生成したランダムなネットワークにおける同類性を指定した数だけ生成してくれる。<u>それらの何%より実際の同類性の数値が大きい/小さいかを検討することで、統計的な検定が行える</u>。今回の例では、実測値はランダムな値の全てより小さいので、ランダムな場合より<u>有意に小さいと言える</u>(図<a href="Chapter3-2.html#fig:fig-perm">3.11</a>)。</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="Chapter3-2.html#cb69-1" tabindex="-1"></a><span class="do">## node label permutationで生成したランダムなネットワーク100個についてassortativityを算出</span></span>
<span id="cb69-2"><a href="Chapter3-2.html#cb69-2" tabindex="-1"></a><span class="fu">met.assortativity</span>(groom_mat_b,</span>
<span id="cb69-3"><a href="Chapter3-2.html#cb69-3" tabindex="-1"></a>                  <span class="do">## 各ノードの固有ベクトル中心性  </span></span>
<span id="cb69-4"><a href="Chapter3-2.html#cb69-4" tabindex="-1"></a>                  <span class="at">attr =</span> rank,</span>
<span id="cb69-5"><a href="Chapter3-2.html#cb69-5" tabindex="-1"></a>                  <span class="do">## 重みなしの場合 FALSE</span></span>
<span id="cb69-6"><a href="Chapter3-2.html#cb69-6" tabindex="-1"></a>                  <span class="at">weighted =</span> <span class="cn">TRUE</span>,</span>
<span id="cb69-7"><a href="Chapter3-2.html#cb69-7" tabindex="-1"></a>                  <span class="do">## node label permutationをするか</span></span>
<span id="cb69-8"><a href="Chapter3-2.html#cb69-8" tabindex="-1"></a>                  <span class="at">perm.nl =</span> <span class="cn">TRUE</span>,</span>
<span id="cb69-9"><a href="Chapter3-2.html#cb69-9" tabindex="-1"></a>                  <span class="do">## permutationの数</span></span>
<span id="cb69-10"><a href="Chapter3-2.html#cb69-10" tabindex="-1"></a>                  <span class="at">nperm =</span> <span class="dv">10000</span>) <span class="ot">-&gt;</span> nlperm_rank</span>
<span id="cb69-11"><a href="Chapter3-2.html#cb69-11" tabindex="-1"></a></span>
<span id="cb69-12"><a href="Chapter3-2.html#cb69-12" tabindex="-1"></a><span class="do">### ランダムなassortativityの何%より小さい？</span></span>
<span id="cb69-13"><a href="Chapter3-2.html#cb69-13" tabindex="-1"></a><span class="fu">sum</span>(nlperm_rank <span class="sc">&gt;</span> assort_rank<span class="sc">$</span>r)<span class="sc">/</span><span class="dv">10000</span></span></code></pre></div>
<pre><code>## [1] 1e-04</code></pre>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-perm"></span>
<img src="Network_Analysis_Using_R_files/figure-html/fig-perm-1.png" alt="ランダムなネットワークの同類性の分布(灰色)と実測値(赤)" width="384" />
<p class="caption">
図3.11: ランダムなネットワークの同類性の分布(灰色)と実測値(赤)
</p>
</div>
</div>
</div>
<div id="推移性transitivity" class="section level3 hasAnchor" number="3.2.4">
<h3><span class="header-section-number">3.2.4</span> 推移性(Transitivity)<a href="Chapter3-2.html#推移性transitivity" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>ネットワークにおいて、頂点<span class="math inline">\(i\)</span>と<span class="math inline">\(j\)</span>の間、および頂点<span class="math inline">\(j\)</span>と<span class="math inline">\(k\)</span>の間に関係があり、頂点<span class="math inline">\(i\)</span>と<span class="math inline">\(k\)</span>の間にも関係があるとき、関係が<strong>推移的</strong>であるという。例えば、図<a href="Chapter3-2.html#fig:fig-trans">3.12</a>で頂点A, B, Cの関係は推移的だが、頂点A, B, Gは推移的ではない。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-trans"></span>
<img src="Network_Analysis_Using_R_files/figure-html/fig-trans-1.png" alt="推移性の説明のための無向グラフの例" width="384" />
<p class="caption">
図3.12: 推移性の説明のための無向グラフの例
</p>
</div>
有向グラフの場合は、頂点<span class="math inline">\(i\)</span>から<span class="math inline">\(j\)</span>、頂点<span class="math inline">\(j\)</span>から<span class="math inline">\(k\)</span>に有向辺があり、かつ頂点<span class="math inline">\(i\)</span>から<span class="math inline">\(k\)</span>に有向辺があるとき推移的であるという(図<a href="Chapter3-2.html#fig:fig-trans2">3.13</a>)。<br />

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-trans2"></span>
<img src="Network_Analysis_Using_R_files/figure-html/fig-trans2-1.png" alt="推移性の説明のための有向グラフの例" width="220.8" />
<p class="caption">
図3.13: 推移性の説明のための有向グラフの例
</p>
</div>
<p><strong>推移性</strong>はネットワーク内で推移的な関係が成り立っている比率を指す。例えば無向グラフの場合には、頂点<span class="math inline">\(i\)</span>と<span class="math inline">\(j\)</span>、<span class="math inline">\(j\)</span>と<span class="math inline">\(k\)</span>の間に辺があるとき、頂点<span class="math inline">\(i\)</span>と<span class="math inline">\(k\)</span>にも辺がある割合である。推移性はネットワークがどの程度クラスター化されているかの指標になる<span class="citation">(<a href="#ref-Farine2015">Farine &amp; Whitehead, 2015</a>)</span>。そのため、<strong>クラスター係数</strong>と呼ばれることもある。</p>
<p>例として、毛づくろい頻度ネットワーク<code>groom_mat_b</code>(表<a href="Chapter2-1.html#tab:tab-groom-b">2.3</a>)の推移性を算出する。推移性は<code>igraph</code>パッケージの<code>transitivity()</code>関数で求められる。推移性は高い？</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="Chapter3-2.html#cb71-1" tabindex="-1"></a><span class="fu">transitivity</span>(graph_groom,</span>
<span id="cb71-2"><a href="Chapter3-2.html#cb71-2" tabindex="-1"></a>             <span class="do">## 有向グラフなら &quot;directed&quot;</span></span>
<span id="cb71-3"><a href="Chapter3-2.html#cb71-3" tabindex="-1"></a>             <span class="at">type =</span> <span class="st">&quot;undirected&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 0.6909722</code></pre>
</div>
<div id="modularity" class="section level3 hasAnchor" number="3.2.5">
<h3><span class="header-section-number">3.2.5</span> Modularity<a href="Chapter3-2.html#modularity" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>霊長類のネットワークの種間比較でよく用いられる指標にNewmanの<strong>modularity</strong><span class="citation">(<a href="#ref-Newman2004">Newman, 2004</a>; <a href="#ref-Whitehead2008">Whitehead, 2008</a>)</span>がある。この指標は、<u>ネットワーク内を複数のクラスターに分けたとき、クラスター内の個体間での交渉がクラスター間の個体間の交渉よりどの程度多いか</u>を示したもので、クラスターの数をcとするとき、-0.5~1-1/cの値をとる<span class="citation">(<a href="#ref-Borgatti2022">Borgatti et al., 2022</a>)</span>。値が高いほどその差が大きいことを示し、クラスターの分け方が妥当であることを示す。<span class="citation">Newman (<a href="#ref-Newman2004">2004</a>)</span> は、modularityが0.3以上のとき、クラスター間がよく分断されているとしている。例えばマカクの種間比較研究では、血縁ごとにクラスター分けしたとき、寛容性が低い種は高い種よりもmodularityが高い(0.33±0.08 vs 0.21 ±0.03)、つまり交渉がより血縁に偏っていることが分かっている<span class="citation">(<a href="#ref-Sueur2011b">Sueur, Petit, et al., 2011</a>)</span>。</p>
<p>Modularityは以下のように定式化される<span class="citation">(<a href="#ref-Csardi2006">Csardi et al., 2006</a>)</span>。</p>
<p><span class="math inline">\(Q = \frac{1}{2m} \sum_{i,j} (A_{ij} - \gamma \frac{k_i k_j}{2m}) \delta(c_i,c_j)\)</span><br />
<br/></p>
<p>なお、<span class="math inline">\(m\)</span>は辺の数、<span class="math inline">\(A_{ij}\)</span>は隣接行列の<span class="math inline">\(i\)</span>行目<span class="math inline">\(j\)</span>列目の成分、<span class="math inline">\(k_i\)</span>と<span class="math inline">\(k_j\)</span>はノード<span class="math inline">\(i\)</span>と<span class="math inline">\(j\)</span>の重み付き中心性を表す(<span class="math inline">\(k_i\)</span>と<span class="math inline">\(k_j\)</span>に固有ベクトル中心性を使っている論文もある<span class="citation">(<a href="#ref-Bala2018">Balasubramaniam et al., 2018</a>)</span>)。また、<span class="math inline">\(\delta(c_i,c_j)\)</span>はノード<span class="math inline">\(i\)</span>と<span class="math inline">\(j\)</span>が同じクラスターに属しているときは1、そうでないときは0になる。なお、<span class="math inline">\(\gamma \frac{k_i k_j}{2m}\)</span>の部分は、ランダムに交渉が行割れていると仮定したときの<span class="math inline">\(A_{ij}\)</span>の値である。<span class="math inline">\(\gamma\)</span>はデフォルトでは1だが変化させることができ、大きい値をとるほどクラスター数が多くなる。</p>
<p>ここでは例として、毛づくろい頻度ネットワーク<code>groom_mat_b</code>(表<a href="Chapter2-1.html#tab:tab-groom-b">2.3</a>)を用いて、各順位カテゴリ内(低順位・中順位・高順位)の交渉がカテゴリ間の交渉よりどの程度多いかを、<span class="math inline">\(Q\)</span>を算出することで求める。</p>
<p>Rでは、<code>igraph</code>パッケージの<code>modularity()</code>関数で求めることができる。<code>graph_from_adjacency_matrix()</code>で<code>igraph</code>クラスに変換した後に算出する。また、<code>weight =</code>で明示的に各エッジのweightを与えてあげる必要があるよう。modularityは0.315…とそこそこ大きい値であるので、順位カテゴリ内に毛づくろいが偏っていることを示している。</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="Chapter3-2.html#cb73-1" tabindex="-1"></a><span class="do">## 順位カテゴリごとに番号を振る</span></span>
<span id="cb73-2"><a href="Chapter3-2.html#cb73-2" tabindex="-1"></a>rank <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>)</span>
<span id="cb73-3"><a href="Chapter3-2.html#cb73-3" tabindex="-1"></a></span>
<span id="cb73-4"><a href="Chapter3-2.html#cb73-4" tabindex="-1"></a><span class="do">## igraphに変換</span></span>
<span id="cb73-5"><a href="Chapter3-2.html#cb73-5" tabindex="-1"></a>graph_groom <span class="ot">&lt;-</span> <span class="fu">graph_from_adjacency_matrix</span>(groom_mat_b,</span>
<span id="cb73-6"><a href="Chapter3-2.html#cb73-6" tabindex="-1"></a>                                           <span class="do">## 有向グラフなら &quot;directed&quot;</span></span>
<span id="cb73-7"><a href="Chapter3-2.html#cb73-7" tabindex="-1"></a>                                           <span class="at">mode=</span> <span class="st">&quot;undirected&quot;</span>, </span>
<span id="cb73-8"><a href="Chapter3-2.html#cb73-8" tabindex="-1"></a>                                           <span class="do">## 重みなしなら NULL</span></span>
<span id="cb73-9"><a href="Chapter3-2.html#cb73-9" tabindex="-1"></a>                                           <span class="at">weighted =</span> <span class="cn">TRUE</span>) </span>
<span id="cb73-10"><a href="Chapter3-2.html#cb73-10" tabindex="-1"></a></span>
<span id="cb73-11"><a href="Chapter3-2.html#cb73-11" tabindex="-1"></a></span>
<span id="cb73-12"><a href="Chapter3-2.html#cb73-12" tabindex="-1"></a><span class="fu">modularity</span>(graph_groom,</span>
<span id="cb73-13"><a href="Chapter3-2.html#cb73-13" tabindex="-1"></a>           <span class="do">## クラスターの分け方</span></span>
<span id="cb73-14"><a href="Chapter3-2.html#cb73-14" tabindex="-1"></a>           <span class="at">membership =</span> rank,</span>
<span id="cb73-15"><a href="Chapter3-2.html#cb73-15" tabindex="-1"></a>           <span class="do">## deltaの値</span></span>
<span id="cb73-16"><a href="Chapter3-2.html#cb73-16" tabindex="-1"></a>           <span class="at">resolution =</span> <span class="dv">1</span>,</span>
<span id="cb73-17"><a href="Chapter3-2.html#cb73-17" tabindex="-1"></a>           <span class="do">## 有向グラフなら TRUE</span></span>
<span id="cb73-18"><a href="Chapter3-2.html#cb73-18" tabindex="-1"></a>           <span class="at">directed =</span> <span class="cn">FALSE</span>,</span>
<span id="cb73-19"><a href="Chapter3-2.html#cb73-19" tabindex="-1"></a>           <span class="do">## グラフのweightを与える</span></span>
<span id="cb73-20"><a href="Chapter3-2.html#cb73-20" tabindex="-1"></a>           <span class="at">weights =</span> <span class="fu">E</span>(graph_groom, <span class="at">directed =</span> <span class="cn">FALSE</span>)<span class="sc">$</span>weight)</span></code></pre></div>
<pre><code>## [1] 0.3152957</code></pre>
</div>
<div id="応用例下位集団の検出" class="section level3 hasAnchor" number="3.2.6">
<h3><span class="header-section-number">3.2.6</span> 応用例(下位集団の検出)<a href="Chapter3-2.html#応用例下位集団の検出" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>ネットワーク内に下位集団(クラスター)が存在するかを調べる方法はたくさんあるが<span class="citation">(詳細は <a href="#ref-Suzuki2017">鈴木, 2017</a>)</span>、ここでは主に2つの方法に焦点を当てて紹介する。</p>
<div id="modularityを用いる方法" class="section level4 hasAnchor" number="3.2.6.1">
<h4><span class="header-section-number">3.2.6.1</span> Modularityを用いる方法<a href="Chapter3-2.html#modularityを用いる方法" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>一つの方法として<u>modularityが最大になるような分け方</u>がある。<code>igraph</code>パッケージでは、<code>cluster_optimal()</code>でそのようなクラスタの分け方を算出してくれる。なお、ノード数が多い場合には時間がかかるため、様々な近似計算法が考案されている(<code>cluster_fast_greedy()</code>、<code>cluster_walktrap()</code>など)。</p>
<p>例として、毛づくろい頻度ネットワーク<code>groom_mat_b</code>(表<a href="Chapter2-1.html#tab:tab-groom-b">2.3</a>)について算出する。その結果、4つのクラスターに分類され、そのときのmodularityは0.40だった。概ね順位ごとに分かれていることが分かる(同じアルファベットから始まる個体が同一家系である)。高順位、中順位(2つに分かれている)、低順位にほぼ綺麗に分かれた。</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="Chapter3-2.html#cb75-1" tabindex="-1"></a><span class="do">## 算出</span></span>
<span id="cb75-2"><a href="Chapter3-2.html#cb75-2" tabindex="-1"></a><span class="fu">cluster_optimal</span>(graph_groom,</span>
<span id="cb75-3"><a href="Chapter3-2.html#cb75-3" tabindex="-1"></a>                <span class="at">weights =</span> <span class="fu">E</span>(graph_groom)<span class="sc">$</span>weight) <span class="ot">-&gt;</span> cluster_groom</span>
<span id="cb75-4"><a href="Chapter3-2.html#cb75-4" tabindex="-1"></a></span>
<span id="cb75-5"><a href="Chapter3-2.html#cb75-5" tabindex="-1"></a><span class="do">## 結果</span></span>
<span id="cb75-6"><a href="Chapter3-2.html#cb75-6" tabindex="-1"></a>cluster_groom</span></code></pre></div>
<pre><code>## IGRAPH clustering optimal, groups: 4, mod: 0.4
## + groups:
##   $`1`
##   [1] &quot;Aka&quot; &quot;Ako&quot; &quot;Mei&quot;
##   
##   $`2`
##   [1] &quot;Hen&quot; &quot;Hot&quot; &quot;Mal&quot; &quot;Mik&quot; &quot;Tam&quot; &quot;Tot&quot;
##   
##   $`3`
##   [1] &quot;Kil&quot; &quot;Kit&quot; &quot;Koh&quot; &quot;Kor&quot; &quot;Kun&quot; &quot;Kur&quot;
##   
##   $`4`
##   + ... omitted several groups/vertices</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="Chapter3-2.html#cb77-1" tabindex="-1"></a><span class="do">## modularity</span></span>
<span id="cb77-2"><a href="Chapter3-2.html#cb77-2" tabindex="-1"></a><span class="fu">modularity</span>(cluster_groom,<span class="at">directed =</span> <span class="cn">FALSE</span>, <span class="at">weights =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<pre><code>## [1] 0.4020546</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="Chapter3-2.html#cb79-1" tabindex="-1"></a><span class="do">## 確認   </span></span>
<span id="cb79-2"><a href="Chapter3-2.html#cb79-2" tabindex="-1"></a><span class="fu">modularity</span>(graph_groom,</span>
<span id="cb79-3"><a href="Chapter3-2.html#cb79-3" tabindex="-1"></a>           <span class="do">## クラスターの分け方</span></span>
<span id="cb79-4"><a href="Chapter3-2.html#cb79-4" tabindex="-1"></a>           <span class="at">membership =</span> <span class="fu">membership</span>(cluster_groom),</span>
<span id="cb79-5"><a href="Chapter3-2.html#cb79-5" tabindex="-1"></a>           <span class="do">## deltaの値</span></span>
<span id="cb79-6"><a href="Chapter3-2.html#cb79-6" tabindex="-1"></a>           <span class="at">resolution =</span> <span class="dv">1</span>,</span>
<span id="cb79-7"><a href="Chapter3-2.html#cb79-7" tabindex="-1"></a>           <span class="do">## 有向グラフなら TRUE</span></span>
<span id="cb79-8"><a href="Chapter3-2.html#cb79-8" tabindex="-1"></a>           <span class="at">directed =</span> <span class="cn">FALSE</span>,</span>
<span id="cb79-9"><a href="Chapter3-2.html#cb79-9" tabindex="-1"></a>           <span class="at">weights =</span> <span class="fu">E</span>(graph_groom)<span class="sc">$</span>weight)                                                                       </span></code></pre></div>
<pre><code>## [1] 0.4020546</code></pre>
<p>クラスターごとに色分けして図示すると図<a href="Chapter3-2.html#fig:fig-cluster">3.14</a>のようになる。</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="Chapter3-2.html#cb81-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">125</span>)</span>
<span id="cb81-2"><a href="Chapter3-2.html#cb81-2" tabindex="-1"></a></span>
<span id="cb81-3"><a href="Chapter3-2.html#cb81-3" tabindex="-1"></a>graph_groom <span class="sc">%&gt;%</span> </span>
<span id="cb81-4"><a href="Chapter3-2.html#cb81-4" tabindex="-1"></a>  <span class="fu">as_tbl_graph</span>(<span class="at">directed =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb81-5"><a href="Chapter3-2.html#cb81-5" tabindex="-1"></a>  <span class="do">## 各個体がどのクラスターに属するかを指定</span></span>
<span id="cb81-6"><a href="Chapter3-2.html#cb81-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">member =</span> <span class="fu">as.factor</span>(cluster_groom<span class="sc">$</span>membership)) <span class="sc">%&gt;%</span> </span>
<span id="cb81-7"><a href="Chapter3-2.html#cb81-7" tabindex="-1"></a>  <span class="fu">ggraph</span>(<span class="at">layout =</span> <span class="st">&quot;nicely&quot;</span>)<span class="sc">+</span></span>
<span id="cb81-8"><a href="Chapter3-2.html#cb81-8" tabindex="-1"></a>  <span class="do">## クラスターごとに囲う</span></span>
<span id="cb81-9"><a href="Chapter3-2.html#cb81-9" tabindex="-1"></a>  <span class="co">#geom_mark_hull(aes(x=x,y=y,fill = member),</span></span>
<span id="cb81-10"><a href="Chapter3-2.html#cb81-10" tabindex="-1"></a>   <span class="co">#              concavity = 10)+</span></span>
<span id="cb81-11"><a href="Chapter3-2.html#cb81-11" tabindex="-1"></a>  <span class="fu">geom_node_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> member),<span class="at">shape =</span> <span class="dv">16</span>, <span class="at">size =</span> <span class="dv">12</span>)<span class="sc">+</span></span>
<span id="cb81-12"><a href="Chapter3-2.html#cb81-12" tabindex="-1"></a>  <span class="fu">geom_edge_link</span>(<span class="at">start_cap =</span> <span class="fu">circle</span>(<span class="fl">0.5</span>,<span class="st">&quot;cm&quot;</span>),</span>
<span id="cb81-13"><a href="Chapter3-2.html#cb81-13" tabindex="-1"></a>                 <span class="at">end_cap =</span> <span class="fu">circle</span>(<span class="fl">0.5</span>,<span class="st">&quot;cm&quot;</span>),</span>
<span id="cb81-14"><a href="Chapter3-2.html#cb81-14" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">&quot;grey55&quot;</span>,</span>
<span id="cb81-15"><a href="Chapter3-2.html#cb81-15" tabindex="-1"></a>                 <span class="fu">aes</span>(<span class="at">width =</span> weight))<span class="sc">+</span></span>
<span id="cb81-16"><a href="Chapter3-2.html#cb81-16" tabindex="-1"></a>  <span class="fu">scale_edge_width</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">3</span>))<span class="sc">+</span></span>
<span id="cb81-17"><a href="Chapter3-2.html#cb81-17" tabindex="-1"></a>  <span class="fu">geom_node_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> name), <span class="at">color =</span> <span class="st">&quot;white&quot;</span>)<span class="sc">+</span></span>
<span id="cb81-18"><a href="Chapter3-2.html#cb81-18" tabindex="-1"></a>  <span class="fu">theme_graph</span>()<span class="sc">+</span></span>
<span id="cb81-19"><a href="Chapter3-2.html#cb81-19" tabindex="-1"></a>  <span class="fu">scale_color_nejm</span>()<span class="sc">+</span></span>
<span id="cb81-20"><a href="Chapter3-2.html#cb81-20" tabindex="-1"></a>  <span class="fu">scale_fill_nejm</span>()<span class="sc">+</span></span>
<span id="cb81-21"><a href="Chapter3-2.html#cb81-21" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">aspect.ratio =</span> <span class="fl">0.9</span>)<span class="sc">+</span></span>
<span id="cb81-22"><a href="Chapter3-2.html#cb81-22" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="fl">0.12</span>,<span class="fl">0.12</span>))<span class="sc">+</span></span>
<span id="cb81-23"><a href="Chapter3-2.html#cb81-23" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="fl">0.1</span>,<span class="fl">0.1</span>))</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-cluster"></span>
<img src="Network_Analysis_Using_R_files/figure-html/fig-cluster-1.png" alt="Modularityに基づいてクラスターごとに色分けした毛づくろい頻度のグラフ" width="576" />
<p class="caption">
図3.14: Modularityに基づいてクラスターごとに色分けした毛づくろい頻度のグラフ
</p>
</div>
</div>
<div id="構造類似性を用いる方法" class="section level4 hasAnchor" number="3.2.6.2">
<h4><span class="header-section-number">3.2.6.2</span> 構造類似性を用いる方法<a href="Chapter3-2.html#構造類似性を用いる方法" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>他の方法として、ノード間でネットワーク内での構造的な位置が類似している程度(= <strong>構造類似性</strong>)を用いる方法がある。構造類似性の指標として良く用いられるのが<strong>ユークリッド距離</strong>や<strong>相関係数</strong>である。このような構造類似性の指標を用い、ネットワーク上における位置の似た頂点をひとまとめにし、ネットワークをより少ないいくつかの<strong>ブロック</strong>同士の関係に分けることを<strong>ブロックモデリング</strong>という。</p>
<p><u><strong>ユークリッド距離</strong></u><br />
ノード<span class="math inline">\(i\)</span>と<span class="math inline">\(j\)</span>のユークリッド距離(<span class="math inline">\(d_{ij}\)</span>)は隣接行列<span class="math inline">\(A = (a_{ij})\)</span>について以下のように定式化される。<span class="math inline">\(d_{ij}\)</span>が大きいほど類似性は低い。</p>
<p><span class="math display">\[
d_{ij} = \sqrt {\sum_{k =1}^{n}(a_{ij}-a_{jk})^2 + (a_{ki}-a_{kj})^2 }
\]</span>
<u><strong>相関係数</strong></u><br />
ノード<span class="math inline">\(i\)</span>とノード<span class="math inline">\(j\)</span>の相関係数(<span class="math inline">\(r_{ij}\)</span>は隣接行列<span class="math inline">\(A = (a_{ij})\)</span>について以下のように定式化される。<span class="math inline">\(r_{ij}\)</span>が大きいほど類似性は高い。</p>
<p><span class="math display">\[
r_{ij} = \frac{(i列とj列の共分散) + (i行とj行の共分散)}{(i列とi行の標準偏差) \times (j列とj行の標準偏差)}
\]</span>
<br/></p>
<p><code>sna</code>パッケージの<code>equiv.clust()</code>関数を用いることで、構造同値性に基づいたクラスター分析ができる。ここでは、毛づくろい頻度ネットワーク<code>groom_mat_b</code>(表<a href="Chapter2-1.html#tab:tab-groom-b">2.3</a>)のユークリッド距離を用いて分析を行う。<code>method =</code>で使用する構造類似性の指標を、<code>clust.method =</code>で階層クラスター分析の方法を指定する(方法の詳細は<a href="https://www.kamishima.net/jp/clustering/">こちら</a>) 。</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="Chapter3-2.html#cb82-1" tabindex="-1"></a><span class="do">## ユークリッド距離</span></span>
<span id="cb82-2"><a href="Chapter3-2.html#cb82-2" tabindex="-1"></a>cluster_groom_euc <span class="ot">&lt;-</span> <span class="fu">equiv.clust</span>(groom_mat_b,</span>
<span id="cb82-3"><a href="Chapter3-2.html#cb82-3" tabindex="-1"></a>                            <span class="do">## 相関係数なら &quot;correlation&quot;</span></span>
<span id="cb82-4"><a href="Chapter3-2.html#cb82-4" tabindex="-1"></a>                             <span class="at">method =</span> <span class="st">&quot;euclidean&quot;</span>,</span>
<span id="cb82-5"><a href="Chapter3-2.html#cb82-5" tabindex="-1"></a>                            <span class="do">## 階層クラスター分析の方法</span></span>
<span id="cb82-6"><a href="Chapter3-2.html#cb82-6" tabindex="-1"></a>                             <span class="at">cluster.method =</span> <span class="st">&quot;complete&quot;</span>)</span></code></pre></div>
クラスター分析に基づくデンドログラムは図<a href="Chapter3-2.html#fig:fig-dendro">3.15</a>のようになる。縦軸が互いのユークリッド距離を表す。<br />

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-dendro"></span>
<img src="Network_Analysis_Using_R_files/figure-html/fig-dendro-1.png" alt="クラスター分析結果に基づくデンドログラム" width="528" />
<p class="caption">
図3.15: クラスター分析結果に基づくデンドログラム
</p>
</div>
<p>この結果から<code>blockmodel()</code>関数でブロックモデルを作る。引数<code>h =</code>でクラスター(= ブロック)を作る基準となる高さを、もしくは引数<code>k =</code>でブロック数を指定できる。ここでは、ブロック数を3つに指定したときの結果を調べる。各個体がどのブロックに振り分けられたかは、表<a href="Chapter3-2.html#tab:tab-cluster3">3.4</a>の通りである。</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="Chapter3-2.html#cb83-1" tabindex="-1"></a>blockmodel_groom_3 <span class="ot">&lt;-</span> <span class="fu">blockmodel</span>(<span class="do">## 隣接行列</span></span>
<span id="cb83-2"><a href="Chapter3-2.html#cb83-2" tabindex="-1"></a>                    groom_mat_b, </span>
<span id="cb83-3"><a href="Chapter3-2.html#cb83-3" tabindex="-1"></a>                    <span class="do">## クラスター分析結果</span></span>
<span id="cb83-4"><a href="Chapter3-2.html#cb83-4" tabindex="-1"></a>                    cluster_groom_euc, </span>
<span id="cb83-5"><a href="Chapter3-2.html#cb83-5" tabindex="-1"></a>                    <span class="do">## `k =`でクラスター数の指定。`h = `でクラスターの基準の高さも指定できる。</span></span>
<span id="cb83-6"><a href="Chapter3-2.html#cb83-6" tabindex="-1"></a>                    <span class="at">k =</span> <span class="dv">3</span>) </span>
<span id="cb83-7"><a href="Chapter3-2.html#cb83-7" tabindex="-1"></a></span>
<span id="cb83-8"><a href="Chapter3-2.html#cb83-8" tabindex="-1"></a><span class="do">## メンバーシップ</span></span>
<span id="cb83-9"><a href="Chapter3-2.html#cb83-9" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">femaleID =</span> blockmodel_groom_3<span class="sc">$</span>plabels,</span>
<span id="cb83-10"><a href="Chapter3-2.html#cb83-10" tabindex="-1"></a>           <span class="at">block =</span> blockmodel_groom_3<span class="sc">$</span>block.membership) <span class="sc">%&gt;%</span> </span>
<span id="cb83-11"><a href="Chapter3-2.html#cb83-11" tabindex="-1"></a>  <span class="fu">arrange</span>(femaleID) <span class="ot">-&gt;</span> membership_3 </span>
<span id="cb83-12"><a href="Chapter3-2.html#cb83-12" tabindex="-1"></a></span>
<span id="cb83-13"><a href="Chapter3-2.html#cb83-13" tabindex="-1"></a>membership_3 <span class="sc">%&gt;%</span> </span>
<span id="cb83-14"><a href="Chapter3-2.html#cb83-14" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> femaleID, <span class="at">values_from =</span> block) <span class="sc">%&gt;%</span> </span>
<span id="cb83-15"><a href="Chapter3-2.html#cb83-15" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">align =</span> <span class="st">&quot;c&quot;</span>, <span class="at">caption =</span> <span class="st">&quot;ブロック数が3のときに各個体が属するブロック&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb83-16"><a href="Chapter3-2.html#cb83-16" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">font_size =</span> <span class="dv">8</span>, <span class="at">full_width =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<table class="table" style="font-size: 8px; width: auto !important; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:tab-cluster3">表3.4: </span>ブロック数が3のときに各個体が属するブロック
</caption>
<thead>
<tr>
<th style="text-align:center;">
Aka
</th>
<th style="text-align:center;">
Ako
</th>
<th style="text-align:center;">
Hen
</th>
<th style="text-align:center;">
Hot
</th>
<th style="text-align:center;">
Kil
</th>
<th style="text-align:center;">
Kit
</th>
<th style="text-align:center;">
Koh
</th>
<th style="text-align:center;">
Kor
</th>
<th style="text-align:center;">
Kun
</th>
<th style="text-align:center;">
Kur
</th>
<th style="text-align:center;">
Mal
</th>
<th style="text-align:center;">
Mei
</th>
<th style="text-align:center;">
Mik
</th>
<th style="text-align:center;">
Ntr
</th>
<th style="text-align:center;">
Tam
</th>
<th style="text-align:center;">
Ten
</th>
<th style="text-align:center;">
Tot
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
2
</td>
</tr>
</tbody>
</table>
<p><br/></p>
<p>ブロック数を2から5に変化させたときにmodularityがどうなるかを調べたところ、<code>k = 3</code>のときに最大になるよう(表<a href="Chapter3-2.html#tab:tab-cluster-modularity">3.5</a>)。</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="Chapter3-2.html#cb84-1" tabindex="-1"></a>k <span class="ot">=</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb84-2"><a href="Chapter3-2.html#cb84-2" tabindex="-1"></a></span>
<span id="cb84-3"><a href="Chapter3-2.html#cb84-3" tabindex="-1"></a><span class="do">## kを2~5にしたときに各個体が属するブロックを計算</span></span>
<span id="cb84-4"><a href="Chapter3-2.html#cb84-4" tabindex="-1"></a><span class="fu">map</span>(k, <span class="sc">~</span><span class="fu">blockmodel</span>(<span class="do">## 隣接行列</span></span>
<span id="cb84-5"><a href="Chapter3-2.html#cb84-5" tabindex="-1"></a>                    groom_mat_b, </span>
<span id="cb84-6"><a href="Chapter3-2.html#cb84-6" tabindex="-1"></a>                    <span class="do">## クラスター分析結果</span></span>
<span id="cb84-7"><a href="Chapter3-2.html#cb84-7" tabindex="-1"></a>                    cluster_groom_euc, </span>
<span id="cb84-8"><a href="Chapter3-2.html#cb84-8" tabindex="-1"></a>                    <span class="do">## `k =`でクラスター数の指定。`h = `でクラスターの基準の高さも指定できる。</span></span>
<span id="cb84-9"><a href="Chapter3-2.html#cb84-9" tabindex="-1"></a>                    <span class="at">k =</span> .)<span class="sc">$</span>block.membership) <span class="ot">-&gt;</span> member_list</span>
<span id="cb84-10"><a href="Chapter3-2.html#cb84-10" tabindex="-1"></a></span>
<span id="cb84-11"><a href="Chapter3-2.html#cb84-11" tabindex="-1"></a></span>
<span id="cb84-12"><a href="Chapter3-2.html#cb84-12" tabindex="-1"></a><span class="do">## modularityを算出  </span></span>
<span id="cb84-13"><a href="Chapter3-2.html#cb84-13" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">k =</span> <span class="fu">rep</span>(k,<span class="at">each =</span> <span class="dv">17</span>),<span class="at">femaleID =</span> blockmodel_groom_3<span class="sc">$</span>plabels,</span>
<span id="cb84-14"><a href="Chapter3-2.html#cb84-14" tabindex="-1"></a>           <span class="at">member =</span> <span class="fu">c</span>(member_list[[<span class="dv">1</span>]],member_list[[<span class="dv">2</span>]],member_list[[<span class="dv">3</span>]],member_list[[<span class="dv">4</span>]])) <span class="sc">%&gt;%</span> </span>
<span id="cb84-15"><a href="Chapter3-2.html#cb84-15" tabindex="-1"></a>  <span class="fu">group_by</span>(k) <span class="sc">%&gt;%</span> </span>
<span id="cb84-16"><a href="Chapter3-2.html#cb84-16" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb84-17"><a href="Chapter3-2.html#cb84-17" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">member2 =</span> <span class="fu">map</span>(data,<span class="sc">~</span><span class="fu">arrange</span>(., femaleID)<span class="sc">$</span>member)) <span class="sc">%&gt;%</span> </span>
<span id="cb84-18"><a href="Chapter3-2.html#cb84-18" tabindex="-1"></a>  <span class="fu">select</span>(k, member2) <span class="sc">%&gt;%</span> </span>
<span id="cb84-19"><a href="Chapter3-2.html#cb84-19" tabindex="-1"></a>  <span class="fu">group_by</span>(k) <span class="sc">%&gt;%</span> </span>
<span id="cb84-20"><a href="Chapter3-2.html#cb84-20" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">modularity =</span> <span class="fu">map</span>(member2, <span class="sc">~</span><span class="fu">modularity</span>(graph_groom, <span class="at">membership =</span> <span class="fu">as.factor</span>(.),</span>
<span id="cb84-21"><a href="Chapter3-2.html#cb84-21" tabindex="-1"></a>                                               <span class="at">weights =</span> <span class="fu">E</span>(graph_groom, <span class="at">directed =</span> <span class="cn">FALSE</span>)<span class="sc">$</span>weight))) <span class="sc">%&gt;%</span> </span>
<span id="cb84-22"><a href="Chapter3-2.html#cb84-22" tabindex="-1"></a>  <span class="fu">select</span>(k, modularity) <span class="sc">%&gt;%</span> </span>
<span id="cb84-23"><a href="Chapter3-2.html#cb84-23" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="at">cols =</span> <span class="fu">c</span>(modularity)) <span class="sc">%&gt;%</span> </span>
<span id="cb84-24"><a href="Chapter3-2.html#cb84-24" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">align =</span> <span class="st">&quot;c&quot;</span>, <span class="at">caption =</span> <span class="st">&quot;ブロック数を2~5にしたときのmodularity&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb84-25"><a href="Chapter3-2.html#cb84-25" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">font_size =</span> <span class="dv">13</span>, <span class="at">full_width =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<table class="table" style="font-size: 13px; width: auto !important; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:tab-cluster-modularity">表3.5: </span>ブロック数を2~5にしたときのmodularity
</caption>
<thead>
<tr>
<th style="text-align:center;">
k
</th>
<th style="text-align:center;">
modularity
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
0.2279996
</td>
</tr>
<tr>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
0.3592285
</td>
</tr>
<tr>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
0.3317726
</td>
</tr>
<tr>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
0.2642927
</td>
</tr>
</tbody>
</table>
<p><br/></p>
<p><code>clValid</code>パッケージの<code>clValid()</code>関数では、様々な指標を用いてクラスター分けが妥当か算出してくれるよう。詳しくは、 <span class="citation">Brock et al. (<a href="#ref-Brock2008">2008</a>)</span> もしくは<a href="http://www.sthda.com/english/wiki/wiki.php?id_contents=7932">こちら</a>を参照。よく使用される指標であるDunn indexと silhouette widthの結果を見ると、3つのクラスターに分けるのが妥当だと示唆される。</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="Chapter3-2.html#cb85-1" tabindex="-1"></a><span class="fu">clValid</span>(<span class="at">obj =</span> groom_mat_b,</span>
<span id="cb85-2"><a href="Chapter3-2.html#cb85-2" tabindex="-1"></a>        <span class="at">nClust =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb85-3"><a href="Chapter3-2.html#cb85-3" tabindex="-1"></a>        <span class="at">clMethods =</span> <span class="st">&quot;hierarchical&quot;</span>,</span>
<span id="cb85-4"><a href="Chapter3-2.html#cb85-4" tabindex="-1"></a>        <span class="at">validation =</span> <span class="st">&quot;internal&quot;</span>,</span>
<span id="cb85-5"><a href="Chapter3-2.html#cb85-5" tabindex="-1"></a>        <span class="at">Metric =</span> <span class="st">&quot;euclidean&quot;</span>) <span class="ot">-&gt;</span> result</span>
<span id="cb85-6"><a href="Chapter3-2.html#cb85-6" tabindex="-1"></a></span>
<span id="cb85-7"><a href="Chapter3-2.html#cb85-7" tabindex="-1"></a><span class="fu">summary</span>(result)</span></code></pre></div>
<pre><code>## 
## Clustering Methods:
##  hierarchical 
## 
## Cluster sizes:
##  2 3 4 5 
## 
## Validation Measures:
##                                  2       3       4       5
##                                                           
## hierarchical Connectivity   2.9290  5.8579  8.8869 11.9270
##              Dunn           0.8946  1.3325  0.6119  0.6219
##              Silhouette     0.5547  0.5632  0.2284  0.1967
## 
## Optimal Scores:
## 
##              Score  Method       Clusters
## Connectivity 2.9290 hierarchical 2       
## Dunn         1.3325 hierarchical 3       
## Silhouette   0.5632 hierarchical 3</code></pre>
<p>３つのクラスターごとに色分けして図示すると図<a href="Chapter3-2.html#fig:fig-cluster2">3.16</a>のようになる。</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="Chapter3-2.html#cb87-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">125</span>)</span>
<span id="cb87-2"><a href="Chapter3-2.html#cb87-2" tabindex="-1"></a></span>
<span id="cb87-3"><a href="Chapter3-2.html#cb87-3" tabindex="-1"></a>graph_groom <span class="sc">%&gt;%</span> </span>
<span id="cb87-4"><a href="Chapter3-2.html#cb87-4" tabindex="-1"></a>  <span class="fu">as_tbl_graph</span>(<span class="at">directed =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb87-5"><a href="Chapter3-2.html#cb87-5" tabindex="-1"></a>  <span class="do">## 各個体がどのブロックに属するかを指定</span></span>
<span id="cb87-6"><a href="Chapter3-2.html#cb87-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">member =</span> <span class="fu">as.factor</span>(membership_3<span class="sc">$</span>block)) <span class="sc">%&gt;%</span> </span>
<span id="cb87-7"><a href="Chapter3-2.html#cb87-7" tabindex="-1"></a>  <span class="fu">ggraph</span>(<span class="at">layout =</span> <span class="st">&quot;nicely&quot;</span>)<span class="sc">+</span></span>
<span id="cb87-8"><a href="Chapter3-2.html#cb87-8" tabindex="-1"></a>  <span class="do">## ブロックごとに囲む</span></span>
<span id="cb87-9"><a href="Chapter3-2.html#cb87-9" tabindex="-1"></a>  <span class="co">#geom_mark_hull(aes(x=x,y=y,fill = member),</span></span>
<span id="cb87-10"><a href="Chapter3-2.html#cb87-10" tabindex="-1"></a>   <span class="co">#              concavity = 10)+</span></span>
<span id="cb87-11"><a href="Chapter3-2.html#cb87-11" tabindex="-1"></a>  <span class="fu">geom_node_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> member),<span class="at">shape =</span> <span class="dv">16</span>, <span class="at">size =</span> <span class="dv">12</span>)<span class="sc">+</span></span>
<span id="cb87-12"><a href="Chapter3-2.html#cb87-12" tabindex="-1"></a>  <span class="fu">geom_edge_link</span>(<span class="at">start_cap =</span> <span class="fu">circle</span>(<span class="fl">0.5</span>,<span class="st">&quot;cm&quot;</span>),</span>
<span id="cb87-13"><a href="Chapter3-2.html#cb87-13" tabindex="-1"></a>                 <span class="at">end_cap =</span> <span class="fu">circle</span>(<span class="fl">0.5</span>,<span class="st">&quot;cm&quot;</span>),</span>
<span id="cb87-14"><a href="Chapter3-2.html#cb87-14" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">&quot;grey55&quot;</span>,</span>
<span id="cb87-15"><a href="Chapter3-2.html#cb87-15" tabindex="-1"></a>                 <span class="fu">aes</span>(<span class="at">width =</span> weight))<span class="sc">+</span></span>
<span id="cb87-16"><a href="Chapter3-2.html#cb87-16" tabindex="-1"></a>  <span class="fu">scale_edge_width</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">3</span>))<span class="sc">+</span></span>
<span id="cb87-17"><a href="Chapter3-2.html#cb87-17" tabindex="-1"></a>  <span class="fu">geom_node_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> name), <span class="at">color =</span> <span class="st">&quot;white&quot;</span>)<span class="sc">+</span></span>
<span id="cb87-18"><a href="Chapter3-2.html#cb87-18" tabindex="-1"></a>  <span class="fu">theme_graph</span>()<span class="sc">+</span></span>
<span id="cb87-19"><a href="Chapter3-2.html#cb87-19" tabindex="-1"></a>  <span class="fu">scale_color_nejm</span>()<span class="sc">+</span></span>
<span id="cb87-20"><a href="Chapter3-2.html#cb87-20" tabindex="-1"></a>  <span class="fu">scale_fill_nejm</span>()<span class="sc">+</span></span>
<span id="cb87-21"><a href="Chapter3-2.html#cb87-21" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">aspect.ratio =</span> <span class="fl">0.9</span>)<span class="sc">+</span></span>
<span id="cb87-22"><a href="Chapter3-2.html#cb87-22" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="fl">0.1</span>,<span class="fl">0.1</span>))<span class="sc">+</span></span>
<span id="cb87-23"><a href="Chapter3-2.html#cb87-23" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="fl">0.1</span>,<span class="fl">0.1</span>))</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-cluster2"></span>
<img src="Network_Analysis_Using_R_files/figure-html/fig-cluster2-1.png" alt="構造類似性に基づいてクラスターごとに色分けした毛づくろい頻度のグラフ" width="576" />
<p class="caption">
図3.16: 構造類似性に基づいてクラスターごとに色分けした毛づくろい頻度のグラフ
</p>
</div>
</div>
</div>
<div id="その他" class="section level3 hasAnchor" number="3.2.7">
<h3><span class="header-section-number">3.2.7</span> その他<a href="Chapter3-2.html#その他" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>個体間の敵対的交渉の隣接行列を用いた順位序列についての各指標の算出については、筆者の<a href="https://tsubasayamaguchi-jinrui.github.io/Dominance_Analysis/">別稿</a>を参照。ここで紹介しきれなかった他の指標やクラスター分析の手法については、<span class="citation">Whitehead (<a href="#ref-Whitehead2008">2008</a>)</span> , <span class="citation">D. Croft et al. (<a href="#ref-Croft2019">2008</a>)</span> , <span class="citation">鈴木 (<a href="#ref-Suzuki2017">2017</a>)</span> などを参照。</p>

</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent" line-spacing="2">
<div id="ref-Bala2018" class="csl-entry">
Balasubramaniam, K. N., Beisner, B. A., Berman, C. M., De Marco, A., Duboscq, J., Koirala, S., Majolo, B., Macintosh, A. J. J. J., McFarland, R., Molesti, S., Ogawa, H., Petit, O., Schino, G., Sosa, S., Sueur, C., Thierry, B., Waal, F. B. M. M. de, &amp; McCowan, B. (2018). The influence of phylogeny, social style, and sociodemographic factors on macaque social network structure. <em>Am. J. Primatol.</em>, <em>80</em>(1), e22727.
</div>
<div id="ref-Borgatti2022" class="csl-entry">
Borgatti, S. P., Everett, M. G., Johnson, J. C., &amp; Agneessens, F. (2022). <em>Analyzing social networks using <span>R</span></em>. SAGE.
</div>
<div id="ref-Brock2008" class="csl-entry">
Brock, G., Pihur, V., Datta, S., &amp; Datta, S. (2008). clValid: An <span>R</span> package for cluster validation. <em>J. Stat. Softw.</em>, <em>25</em>, 1–22.
</div>
<div id="ref-Croft2019" class="csl-entry">
Croft, D., James, R., &amp; Krause, J. (2008). <em>動物の社会ネットワーク分析</em> (島田将喜., Trans.). 東海大学出版部.
</div>
<div id="ref-Csardi2006" class="csl-entry">
Csardi, G., Nepusz, T., &amp; Others. (2006). The igraph software package for complex network research. <em>InterJournal, Complex Systems</em>, <em>1695</em>(5), 1–9.
</div>
<div id="ref-Farine2014" class="csl-entry">
Farine, D. R. (2014). Measuring phenotypic assortment in animal social networks: Weighted associations are more robust than binary edges. <em>Anim. Behav.</em>, <em>89</em>, 141–153.
</div>
<div id="ref-Farine2015" class="csl-entry">
Farine, D. R., &amp; Whitehead, H. (2015). Constructing, conducting and interpreting animal social network analysis. <em>J. Anim. Ecol.</em>, <em>84</em>(5), 1144–1163.
</div>
<div id="ref-Newman2004" class="csl-entry">
Newman, M. E. J. (2004). Analysis of weighted networks. <em>Phys. Rev. E Stat. Nonlin. Soft Matter Phys.</em>, <em>70</em>(5 Pt 2), 056131.
</div>
<div id="ref-Sueur2011b" class="csl-entry">
Sueur, C., Petit, O., De Marco, A., Jacobs, A. T., Watanabe, K., &amp; Thierry, B. (2011). A comparative network analysis of social style in macaques. <em>Anim. Behav.</em>, <em>82</em>(4), 845–852.
</div>
<div id="ref-Whitehead2008" class="csl-entry">
Whitehead, H. (2008). <em>Analyzing animal societies</em>. The University of Chicago Press.
</div>
<div id="ref-Suzuki2017" class="csl-entry">
鈴木努. (2017). <em>R で学ぶデータサイエンス 8 ネットワーク分析　第2版</em> (金明哲., Ed.). 共立出版.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="Chapter3-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="Chapter4-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
